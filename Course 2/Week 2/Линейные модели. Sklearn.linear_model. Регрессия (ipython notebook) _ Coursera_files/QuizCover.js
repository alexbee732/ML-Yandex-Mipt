define("bundles/quiz/components/QuizCover",["require","exports","module","react","js/lib/moment.validator","bundles/item/constants/ItemTypes","pages/open-course/common/models/itemMetadata","bundles/content-feedback/components/ItemFeedback","bundles/item/components/LockingCover","bundles/quiz/components/QuizCoverHeader","bundles/quiz/components/QuizCoverInfo","bundles/quiz/components/QuizCoverScore","bundles/quiz/components/QuizCoverTime","bundles/quiz/components/QuizCoverControls","i18n!nls/quiz","css!./__styles__/QuizCover"],function(require,exports,module){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _defaults(e,r){for(var i=Object.getOwnPropertyNames(r),t=0;t<i.length;t++){var s=i[t],o=Object.getOwnPropertyDescriptor(r,s);o&&o.configurable&&void 0===e[s]&&Object.defineProperty(e,s,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var t,s,i=require("react"),e=_interopRequireDefault(i),n=require("js/lib/moment.validator"),a=_interopRequireDefault(n),p=require("bundles/item/constants/ItemTypes"),u=_interopRequireDefault(p),l=require("pages/open-course/common/models/itemMetadata"),d=_interopRequireDefault(l),c=require("bundles/content-feedback/components/ItemFeedback"),I=_interopRequireDefault(c),m=require("bundles/item/components/LockingCover"),f=_interopRequireDefault(m),b=require("bundles/quiz/components/QuizCoverHeader"),h=_interopRequireDefault(b),y=require("bundles/quiz/components/QuizCoverInfo"),v=_interopRequireDefault(y),P=require("bundles/quiz/components/QuizCoverScore"),o=_interopRequireDefault(P),g=require("bundles/quiz/components/QuizCoverTime"),T=_interopRequireDefault(g),C=require("bundles/quiz/components/QuizCoverControls"),z=_interopRequireDefault(C),S=require("i18n!nls/quiz"),r=_interopRequireDefault(S);require("css!./__styles__/QuizCover");var L=(s=t=function(t){function QuizCover(){return _classCallCheck(this,QuizCover),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(QuizCover,t),QuizCover.prototype.showHonorControls=function showHonorControls(){return"exam"===this.props.type&&this.props.timeLimit>0&&!this.props.isInProgress},QuizCover.prototype.buildHeader=function buildHeader(){return e["default"].createElement(h["default"],{isItemLocked:this.props.isItemLocked,type:this.props.type,titlePrefix:this.props.titlePrefix,title:this.props.title,questionCount:this.props.questionCount,isSubmitted:this.props.isSubmitted,relativePassingState:this.props.relativePassingState})},QuizCover.prototype.buildScore=function buildScore(){var t=this.props.score;if("string"==typeof t)return e["default"].createElement(o["default"],{type:this.props.type,maxScore:this.props.maxScore,isPassed:this.props.isPassed,relativePassingState:this.props.relativePassingState,score:parseFloat(t,10),showPercentageScoreOnly:!0,onReview:this.props.onReview,itemGrade:this.props.itemGrade});if(Number.isInteger(t)&&t>=0)return e["default"].createElement(o["default"],{type:this.props.type,maxScore:this.props.maxScore,isPassed:this.props.isPassed,relativePassingState:this.props.relativePassingState,score:t,onReview:this.props.onReview,itemGrade:this.props.itemGrade});return null},QuizCover.prototype.buildInfo=function buildInfo(){return e["default"].createElement(v["default"],{passFraction:this.props.passFraction,deadline:this.props.deadline,attemptsRateCount:this.props.attemptsRateCount,attemptsRateInterval:this.props.attemptsRateInterval,isSubmitted:this.props.isSubmitted,attemptsLeft:this.props.attemptsLeft})},QuizCover.prototype.buildTime=function buildTime(){return e["default"].createElement(T["default"],{isInProgress:this.props.isInProgress,isLocked:this.props.isLocked,lockedTimeLeft:this.props.lockedTimeLeft,attemptsLeft:this.props.attemptsLeft,timeLimit:this.props.timeLimit,timeLeft:this.props.timeLeft,timeWarn:this.props.timeWarn})},QuizCover.prototype.buildControls=function buildControls(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.enableHonorControls,s=void 0===t?!1:t;return e["default"].createElement(z["default"],{layout:s?"none":"cover",enableVerification:s,type:this.props.type,isInProgress:this.props.isInProgress,isSubmitted:this.props.isSubmitted,isLocked:this.props.isLocked,isPassed:this.props.isPassed,onStart:this.props.onStart})},QuizCover.prototype.render=function render(){var t=this.props,s=t.itemMetadata,c=t.isAuthenticated,n=t.isItemLocked,d=t.isInProgress,p=t.isSubmitted,l=t.isLocked,a=t.isPassed,o=t.attemptsLeft;if(!s)return null;var i=null;return i=n?e["default"].createElement("div",{className:"pseudocard"},this.buildHeader(),e["default"].createElement(f["default"],{itemMetadata:s})):0>=o?e["default"].createElement("div",{className:"pseudocard"},this.buildHeader(),this.buildScore(),!d&&!a&&e["default"].createElement("div",{className:"cover-contact cover-spaced-box bt3-row"},e["default"].createElement("div",{className:"bt3-col-md-offset-1 bt3-col-md-11"},e["default"].createElement("div",{className:"color-danger"},r["default"]("You have no attempts remaining.")),e["default"].createElement("div",null,r["default"]("Contact your instructor if you would like to try again."))))):e["default"].createElement("div",{className:"pseudocard"},this.buildHeader(),c&&p&&this.buildScore(),!a&&this.buildInfo(),e["default"].createElement("div",{className:"cover-time cover-spaced-box"},this.buildTime()),!this.showHonorControls()&&this.buildControls()),e["default"].createElement("div",{className:"rc-QuizCover"},i,e["default"].createElement("div",{className:"quizcover-feedback"},e["default"].createElement(I["default"],{itemType:u["default"].Quiz,itemMetadata:s,itemId:s.get("id"),courseId:s.get("course").get("id")})),!n&&!l&&(o>0||void 0===o)&&this.showHonorControls()&&this.buildControls({enableHonorControls:!0}))},QuizCover}(e["default"].Component),t.propTypes={itemMetadata:e["default"].PropTypes.instanceOf(d["default"]),isAuthenticated:e["default"].PropTypes.bool,isItemLocked:e["default"].PropTypes.bool,type:e["default"].PropTypes.oneOf(["quiz","exam"]),titlePrefix:e["default"].PropTypes.string,title:e["default"].PropTypes.string,questionCount:e["default"].PropTypes.number,maxScore:e["default"].PropTypes.number,passFraction:e["default"].PropTypes.number,deadline:a["default"],attemptsRateCount:e["default"].PropTypes.number,attemptsRateInterval:e["default"].PropTypes.number,isInProgress:e["default"].PropTypes.bool,isSubmitted:e["default"].PropTypes.bool,isLocked:e["default"].PropTypes.bool,lockedTimeLeft:e["default"].PropTypes.number,isPassed:e["default"].PropTypes.bool,relativePassingState:e["default"].PropTypes.number,score:e["default"].PropTypes.number,itemGrade:e["default"].PropTypes.object,attemptsLeft:e["default"].PropTypes.number,timeLimit:e["default"].PropTypes.number,timeLeft:e["default"].PropTypes.number,timeWarn:e["default"].PropTypes.number,onStart:e["default"].PropTypes.func,onReview:e["default"].PropTypes.func},s);module.exports=L});